'use strict';var cov_5pmoydv8t=function(){var path="C:\\Users\\user pc\\Documents\\iReport\\server\\controller\\redflagController.js",hash="839ae04e99d47f663cd7df3cce9f7cbaaf16b1bd",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\user pc\\Documents\\iReport\\server\\controller\\redflagController.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:20},end:{line:7,column:52}},"2":{start:{line:9,column:21},end:{line:9,column:58}},"3":{start:{line:11,column:39},end:{line:11,column:93}},"4":{start:{line:21,column:8},end:{line:35,column:9}},"5":{start:{line:22,column:30},end:{line:22,column:163}},"6":{start:{line:23,column:12},end:{line:30,column:15}},"7":{start:{line:32,column:12},end:{line:34,column:15}},"8":{start:{line:45,column:8},end:{line:55,column:9}},"9":{start:{line:46,column:31},end:{line:46,column:78}},"10":{start:{line:47,column:12},end:{line:50,column:15}},"11":{start:{line:52,column:12},end:{line:54,column:15}},"12":{start:{line:65,column:8},end:{line:75,column:9}},"13":{start:{line:66,column:31},end:{line:66,column:93}},"14":{start:{line:67,column:12},end:{line:70,column:15}},"15":{start:{line:72,column:12},end:{line:74,column:15}},"16":{start:{line:85,column:8},end:{line:96,column:9}},"17":{start:{line:86,column:35},end:{line:86,column:112}},"18":{start:{line:87,column:12},end:{line:91,column:15}},"19":{start:{line:93,column:12},end:{line:95,column:15}},"20":{start:{line:106,column:8},end:{line:117,column:9}},"21":{start:{line:107,column:34},end:{line:107,column:109}},"22":{start:{line:108,column:12},end:{line:112,column:15}},"23":{start:{line:114,column:12},end:{line:116,column:15}},"24":{start:{line:127,column:8},end:{line:138,column:9}},"25":{start:{line:128,column:34},end:{line:128,column:96}},"26":{start:{line:129,column:12},end:{line:133,column:15}},"27":{start:{line:135,column:12},end:{line:137,column:15}},"28":{start:{line:142,column:0},end:{line:142,column:26}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:11,column:95}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:4},end:{line:20,column:5}},loc:{start:{line:20,column:40},end:{line:36,column:5}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:44,column:4},end:{line:44,column:5}},loc:{start:{line:44,column:42},end:{line:56,column:5}},line:44},"3":{name:"(anonymous_3)",decl:{start:{line:64,column:4},end:{line:64,column:5}},loc:{start:{line:64,column:41},end:{line:76,column:5}},line:64},"4":{name:"(anonymous_4)",decl:{start:{line:84,column:4},end:{line:84,column:5}},loc:{start:{line:84,column:49},end:{line:97,column:5}},line:84},"5":{name:"(anonymous_5)",decl:{start:{line:105,column:4},end:{line:105,column:5}},loc:{start:{line:105,column:48},end:{line:118,column:5}},line:105},"6":{name:"(anonymous_6)",decl:{start:{line:126,column:4},end:{line:126,column:5}},loc:{start:{line:126,column:41},end:{line:139,column:5}},line:126}},branchMap:{"0":{loc:{start:{line:11,column:46},end:{line:11,column:92}},type:"cond-expr",locations:[{start:{line:11,column:70},end:{line:11,column:73}},{start:{line:11,column:76},end:{line:11,column:92}}],line:11},"1":{loc:{start:{line:11,column:46},end:{line:11,column:67}},type:"binary-expr",locations:[{start:{line:11,column:46},end:{line:11,column:49}},{start:{line:11,column:53},end:{line:11,column:67}}],line:11}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_5pmoydv8t.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _recordsModel=(cov_5pmoydv8t.s[1]++,require('../model/recordsModel'));var _recordsModel2=(cov_5pmoydv8t.s[2]++,_interopRequireDefault(_recordsModel));function _interopRequireDefault(obj){cov_5pmoydv8t.f[0]++;cov_5pmoydv8t.s[3]++;return(cov_5pmoydv8t.b[1][0]++,obj)&&(cov_5pmoydv8t.b[1][1]++,obj.__esModule)?(cov_5pmoydv8t.b[0][0]++,obj):(cov_5pmoydv8t.b[0][1]++,{default:obj});}class Records{/**
     * @async createRecord
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async createRecord(req,res){cov_5pmoydv8t.f[1]++;cov_5pmoydv8t.s[4]++;try{const newRecord=(cov_5pmoydv8t.s[5]++,await _recordsModel2.default.create(req.userId,req.body.type,req.body.location,req.body.images,req.body.videos,req.body.comment));cov_5pmoydv8t.s[6]++;return res.status(201).send({status:201,data:[{id:newRecord.id,message:'Created red-flag record',record:newRecord}]});}catch(error){cov_5pmoydv8t.s[7]++;return res.status(500).send({message:error});}}/**
     * @async getAllRedflags
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async getAllRedflags(req,res){cov_5pmoydv8t.f[2]++;cov_5pmoydv8t.s[8]++;try{const allRecords=(cov_5pmoydv8t.s[9]++,await _recordsModel2.default.getAll(req.userId));cov_5pmoydv8t.s[10]++;return res.status(200).send({status:200,data:allRecords});}catch(error){cov_5pmoydv8t.s[11]++;return res.status(500).send({message:error});}}/**
     * @async
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async getOneRedflag(req,res){cov_5pmoydv8t.f[3]++;cov_5pmoydv8t.s[12]++;try{const oneRedflag=(cov_5pmoydv8t.s[13]++,await _recordsModel2.default.getOne(req.userId,req.params.id));cov_5pmoydv8t.s[14]++;return res.status(200).send({status:200,data:oneRedflag});}catch(error){cov_5pmoydv8t.s[15]++;return res.status(500).send({message:error});}}/**
     * @async updateRedflagLocation
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async updateRedflagLocation(req,res){cov_5pmoydv8t.f[4]++;cov_5pmoydv8t.s[16]++;try{const updateLocation=(cov_5pmoydv8t.s[17]++,await _recordsModel2.default.updateLocation(req.params.id,req.body.location));cov_5pmoydv8t.s[18]++;return res.status(200).send({status:200,message:'Updated red-flag record\'s location',data:updateLocation});}catch(error){cov_5pmoydv8t.s[19]++;return res.status(500).send({message:error});}}/**
     * @async updateRedflagComment
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async updateRedflagComment(req,res){cov_5pmoydv8t.f[5]++;cov_5pmoydv8t.s[20]++;try{const updateComment=(cov_5pmoydv8t.s[21]++,await _recordsModel2.default.updateComment(req.params.id,req.body.comment));cov_5pmoydv8t.s[22]++;return res.status(200).send({status:200,message:'Updated red-flag record\'s comment',data:updateComment});}catch(error){cov_5pmoydv8t.s[23]++;return res.status(500).send({message:error});}}/**
     * @async deleteRedflag
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async deleteRedflag(req,res){cov_5pmoydv8t.f[6]++;cov_5pmoydv8t.s[24]++;try{const deleteRedflag=(cov_5pmoydv8t.s[25]++,await _recordsModel2.default.delete(req.userId,req.params.id));cov_5pmoydv8t.s[26]++;return res.status(200).send({status:200,message:'red-flag record has been deleted',data:deleteRedflag});}catch(error){cov_5pmoydv8t.s[27]++;return res.status(500).send({message:error});}}}// Records controller
cov_5pmoydv8t.s[28]++;exports.default=Records;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZGZsYWdDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIlJlY29yZHMiLCJjcmVhdGVSZWNvcmQiLCJyZXEiLCJyZXMiLCJuZXdSZWNvcmQiLCJNb2RlbCIsImNyZWF0ZSIsInVzZXJJZCIsImJvZHkiLCJ0eXBlIiwibG9jYXRpb24iLCJpbWFnZXMiLCJ2aWRlb3MiLCJjb21tZW50Iiwic3RhdHVzIiwic2VuZCIsImRhdGEiLCJpZCIsIm1lc3NhZ2UiLCJyZWNvcmQiLCJlcnJvciIsImdldEFsbFJlZGZsYWdzIiwiYWxsUmVjb3JkcyIsImdldEFsbCIsImdldE9uZVJlZGZsYWciLCJvbmVSZWRmbGFnIiwiZ2V0T25lIiwicGFyYW1zIiwidXBkYXRlUmVkZmxhZ0xvY2F0aW9uIiwidXBkYXRlTG9jYXRpb24iLCJ1cGRhdGVSZWRmbGFnQ29tbWVudCIsInVwZGF0ZUNvbW1lbnQiLCJkZWxldGVSZWRmbGFnIiwiZGVsZXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFFQTs7Ozs7O0FBRUEsTUFBTUEsT0FBTixDQUFjO0FBQ1Y7Ozs7OztBQU1BLGlCQUFhQyxZQUFiLENBQTBCQyxHQUExQixFQUErQkMsR0FBL0IsRUFBb0M7QUFDaEMsWUFBSTtBQUNBLGtCQUFNQyxZQUFZLE1BQU1DLHVCQUFNQyxNQUFOLENBQ3BCSixJQUFJSyxNQURnQixFQUVwQkwsSUFBSU0sSUFBSixDQUFTQyxJQUZXLEVBR3BCUCxJQUFJTSxJQUFKLENBQVNFLFFBSFcsRUFJcEJSLElBQUlNLElBQUosQ0FBU0csTUFKVyxFQUtwQlQsSUFBSU0sSUFBSixDQUFTSSxNQUxXLEVBTXBCVixJQUFJTSxJQUFKLENBQVNLLE9BTlcsQ0FBeEI7QUFRQSxtQkFBT1YsSUFBSVcsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ3hCRCx3QkFBUSxHQURnQjtBQUV4QkUsc0JBQU0sQ0FBQztBQUNIQyx3QkFBSWIsVUFBVWEsRUFEWDtBQUVIQyw2QkFBUyx5QkFGTjtBQUdIQyw0QkFBUWY7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QixFQUFnQ0MsR0FBaEMsRUFBcUM7QUFDakMsWUFBSTtBQUNBLGtCQUFNNkIsZ0JBQWdCLE1BQU0zQix1QkFBTTRCLE1BQU4sQ0FBYS9CLElBQUlLLE1BQWpCLEVBQXlCTCxJQUFJeUIsTUFBSixDQUFXVixFQUFwQyxDQUE1QjtBQUNBLG1CQUFPZCxJQUFJVyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDeEJELHdCQUFRLEdBRGdCO0FBRXhCSSx5QkFBUyxrQ0FGZTtBQUd4QkYsc0JBQU1nQjtBQUhrQixhQUFyQixDQUFQO0FBS0gsU0FQRCxDQU9FLE9BQU9aLEtBQVAsRUFBYztBQUNaLG1CQUFPakIsSUFBSVcsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ3hCRyx5QkFBU0U7QUFEZSxhQUFyQixDQUFQO0FBR0g7QUFDSjtBQXRJUyxDLENBSmQ7O2tCQTRJZXBCLE8iLCJmaWxlIjoicmVkZmxhZ0NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvdXNlciBwYy9Eb2N1bWVudHMvaVJlcG9ydC9zZXJ2ZXIvY29udHJvbGxlciIsInNvdXJjZXNDb250ZW50IjpbIi8vIFJlY29yZHMgY29udHJvbGxlclxyXG5cclxuaW1wb3J0IE1vZGVsIGZyb20gJy4uL21vZGVsL3JlY29yZHNNb2RlbCc7XHJcblxyXG5jbGFzcyBSZWNvcmRzIHtcclxuICAgIC8qKlxyXG4gICAgICogQGFzeW5jIGNyZWF0ZVJlY29yZFxyXG4gICAgICogQHBhcmFtIHsqfSByZXFcclxuICAgICAqIEBwYXJhbSB7Kn0gcmVzXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlUmVjb3JkKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3UmVjb3JkID0gYXdhaXQgTW9kZWwuY3JlYXRlKFxyXG4gICAgICAgICAgICAgICAgcmVxLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIHJlcS5ib2R5LnR5cGUsXHJcbiAgICAgICAgICAgICAgICByZXEuYm9keS5sb2NhdGlvbixcclxuICAgICAgICAgICAgICAgIHJlcS5ib2R5LmltYWdlcyxcclxuICAgICAgICAgICAgICAgIHJlcS5ib2R5LnZpZGVvcyxcclxuICAgICAgICAgICAgICAgIHJlcS5ib2R5LmNvbW1lbnQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG5ld1JlY29yZC5pZCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ3JlYXRlZCByZWQtZmxhZyByZWNvcmQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZDogbmV3UmVjb3JkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGFzeW5jIGdldEFsbFJlZGZsYWdzXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlcVxyXG4gICAgICogQHBhcmFtIHsqfSByZXNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBnZXRBbGxSZWRmbGFncyhyZXEsIHJlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFJlY29yZHMgPSBhd2FpdCBNb2RlbC5nZXRBbGwocmVxLnVzZXJJZCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGFsbFJlY29yZHMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGFzeW5jXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlcVxyXG4gICAgICogQHBhcmFtIHsqfSByZXNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBnZXRPbmVSZWRmbGFnKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgb25lUmVkZmxhZyA9IGF3YWl0IE1vZGVsLmdldE9uZShyZXEudXNlcklkLCByZXEucGFyYW1zLmlkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogb25lUmVkZmxhZyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAYXN5bmMgdXBkYXRlUmVkZmxhZ0xvY2F0aW9uXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlcVxyXG4gICAgICogQHBhcmFtIHsqfSByZXNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyB1cGRhdGVSZWRmbGFnTG9jYXRpb24ocmVxLCByZXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVMb2NhdGlvbiA9IGF3YWl0IE1vZGVsLnVwZGF0ZUxvY2F0aW9uKHJlcS5wYXJhbXMuaWQsIHJlcS5ib2R5LmxvY2F0aW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1VwZGF0ZWQgcmVkLWZsYWcgcmVjb3JkXFwncyBsb2NhdGlvbicsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB1cGRhdGVMb2NhdGlvbixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAYXN5bmMgdXBkYXRlUmVkZmxhZ0NvbW1lbnRcclxuICAgICAqIEBwYXJhbSB7Kn0gcmVxXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlc1xyXG4gICAgICogQHJldHVybnMge29iamVjdH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIHVwZGF0ZVJlZGZsYWdDb21tZW50KHJlcSwgcmVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlQ29tbWVudCA9IGF3YWl0IE1vZGVsLnVwZGF0ZUNvbW1lbnQocmVxLnBhcmFtcy5pZCwgcmVxLmJvZHkuY29tbWVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVcGRhdGVkIHJlZC1mbGFnIHJlY29yZFxcJ3MgY29tbWVudCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB1cGRhdGVDb21tZW50LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBhc3luYyBkZWxldGVSZWRmbGFnXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlcVxyXG4gICAgICogQHBhcmFtIHsqfSByZXNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBkZWxldGVSZWRmbGFnKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZGVsZXRlUmVkZmxhZyA9IGF3YWl0IE1vZGVsLmRlbGV0ZShyZXEudXNlcklkLCByZXEucGFyYW1zLmlkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ3JlZC1mbGFnIHJlY29yZCBoYXMgYmVlbiBkZWxldGVkJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IGRlbGV0ZVJlZGZsYWcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFJlY29yZHM7XHJcbiJdfQ==