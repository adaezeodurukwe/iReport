{"version":3,"sources":["userModel.js"],"names":["Model","create","firstname","lasttname","othernames","email","password","phone","isAdmin","sql","values","format","rows","pool","query","getOne","getById","id"],"mappings":";;;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAGA;;;AAGA,MAAMA,KAAN,CAAY;AACR;;;;;;;;;;;AAWA,iBAAaC,MAAb,CAAoBC,SAApB,EAA+BC,SAA/B,EAA0CC,UAA1C,EAAsDC,KAAtD,EAA6DC,QAA7D,EAAuEC,KAAvE,EAA8EC,UAAU,KAAxF,EAA+F;AAC3F,cAAMC,MAAM,6JAAZ;AACA,cAAMC,SAAS,CACX,kBADW,EAEXR,SAFW,EAGXC,SAHW,EAIXC,UAJW,EAKXC,KALW,EAMXC,QANW,EAOXC,KAPW,EAQX,wBAASI,MAAT,CAAgB,YAAhB,CARW,EASXH,OATW,CAAf;AAWA,cAAM,EAAEI,IAAF,KAAW,MAAMC,kBAAKC,KAAL,CAAWL,GAAX,EAAgBC,MAAhB,CAAvB;AACA,eAAOE,KAAK,CAAL,CAAP;AACH;;AAED;;;;;AAKA,iBAAaG,MAAb,CAAoBV,KAApB,EAA2B;AACvB,cAAMI,MAAM,sCAAZ;AACA,cAAMC,SAAS,CAACL,KAAD,CAAf;;AAEA,cAAM,EAAEO,IAAF,KAAW,MAAMC,kBAAKC,KAAL,CAAWL,GAAX,EAAgBC,MAAhB,CAAvB;AACA,eAAOE,KAAK,CAAL,CAAP;AACH;;AAED,iBAAaI,OAAb,CAAqBC,EAArB,EAAyB;AACrB,cAAMR,MAAM,mCAAZ;AACA,cAAMC,SAAS,CAACO,EAAD,CAAf;;AAEA,cAAM,EAAEL,IAAF,KAAW,MAAMC,kBAAKC,KAAL,CAAWL,GAAX,EAAgBC,MAAhB,CAAvB;AACA,eAAOE,KAAK,CAAL,CAAP;AACH;AAhDO,C,CAVZ;;kBA6DeZ,K","file":"userModel.js","sourceRoot":"C:/Users/user pc/Documents/iReport/server/model","sourcesContent":["// User Model\r\n\r\nimport uuidv4 from 'uuid/v4';\r\nimport moment from 'moment';\r\nimport pool from '../db/connect';\r\n\r\n\r\n/**\r\n * @class Model\r\n */\r\nclass Model {\r\n    /**\r\n     * @async create\r\n     * @param {*} firstname\r\n     * @param {*} lasttname\r\n     * @param {*} othernames\r\n     * @param {*} email\r\n     * @param {*} password\r\n     * @param {*} phone\r\n     * @param {*} isAdmin\r\n     * @returns {object}\r\n     */\r\n    static async create(firstname, lasttname, othernames, email, password, phone, isAdmin = false) {\r\n        const sql = 'INSERT INTO users(id, firstname, lastname, othernames, email, password, phone, registered, isAdmin) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING *';\r\n        const values = [\r\n            uuidv4(),\r\n            firstname,\r\n            lasttname,\r\n            othernames,\r\n            email,\r\n            password,\r\n            phone,\r\n            moment().format('DD/MM/YYYY'),\r\n            isAdmin,\r\n        ];\r\n        const { rows } = await pool.query(sql, values);\r\n        return rows[0];\r\n    }\r\n\r\n    /**\r\n     * @async getOne\r\n     * @param {*} email\r\n     * @returns {object}\r\n     */\r\n    static async getOne(email) {\r\n        const sql = 'SELECT * FROM users WHERE email = $1';\r\n        const values = [email];\r\n\r\n        const { rows } = await pool.query(sql, values);\r\n        return rows[0];\r\n    }\r\n\r\n    static async getById(id) {\r\n        const sql = 'SELECT * FROM users WHERE id = $1';\r\n        const values = [id];\r\n\r\n        const { rows } = await pool.query(sql, values);\r\n        return rows[0];\r\n    }\r\n}\r\n\r\nexport default Model;\r\n"]}