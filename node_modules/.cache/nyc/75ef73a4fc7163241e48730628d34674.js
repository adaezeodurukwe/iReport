'use strict';var cov_mihs77e3=function(){var path="C:\\Users\\user pc\\Documents\\iReport\\server\\controller\\userController.js",hash="1eff605a305e3eff02715c6b1470f6dfc1b03226",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\user pc\\Documents\\iReport\\server\\controller\\userController.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:17},end:{line:7,column:46}},"2":{start:{line:9,column:18},end:{line:9,column:52}},"3":{start:{line:11,column:14},end:{line:11,column:33}},"4":{start:{line:13,column:13},end:{line:13,column:45}},"5":{start:{line:15,column:40},end:{line:15,column:267}},"6":{start:{line:15,column:69},end:{line:15,column:80}},"7":{start:{line:15,column:103},end:{line:15,column:105}},"8":{start:{line:15,column:107},end:{line:15,column:228}},"9":{start:{line:15,column:126},end:{line:15,column:226}},"10":{start:{line:15,column:149},end:{line:15,column:224}},"11":{start:{line:15,column:201},end:{line:15,column:224}},"12":{start:{line:15,column:229},end:{line:15,column:250}},"13":{start:{line:15,column:251},end:{line:15,column:265}},"14":{start:{line:17,column:39},end:{line:17,column:93}},"15":{start:{line:32,column:25},end:{line:32,column:68}},"16":{start:{line:33,column:8},end:{line:47,column:9}},"17":{start:{line:34,column:28},end:{line:34,column:181}},"18":{start:{line:35,column:30},end:{line:35,column:62}},"19":{start:{line:36,column:12},end:{line:42,column:15}},"20":{start:{line:44,column:12},end:{line:46,column:15}},"21":{start:{line:57,column:8},end:{line:84,column:9}},"22":{start:{line:58,column:25},end:{line:58,column:73}},"23":{start:{line:60,column:12},end:{line:65,column:13}},"24":{start:{line:61,column:16},end:{line:64,column:19}},"25":{start:{line:67,column:26},end:{line:67,column:80}},"26":{start:{line:68,column:12},end:{line:70,column:13}},"27":{start:{line:69,column:16},end:{line:69,column:81}},"28":{start:{line:71,column:30},end:{line:71,column:59}},"29":{start:{line:72,column:12},end:{line:79,column:15}},"30":{start:{line:81,column:12},end:{line:83,column:15}},"31":{start:{line:88,column:0},end:{line:88,column:23}}},fnMap:{"0":{name:"_interopRequireWildcard",decl:{start:{line:15,column:9},end:{line:15,column:32}},loc:{start:{line:15,column:38},end:{line:15,column:269}},line:15},"1":{name:"_interopRequireDefault",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:37},end:{line:17,column:95}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:31,column:4},end:{line:31,column:5}},loc:{start:{line:31,column:38},end:{line:48,column:5}},line:31},"3":{name:"(anonymous_3)",decl:{start:{line:56,column:4},end:{line:56,column:5}},loc:{start:{line:56,column:33},end:{line:85,column:5}},line:56}},branchMap:{"0":{loc:{start:{line:15,column:40},end:{line:15,column:267}},type:"if",locations:[{start:{line:15,column:40},end:{line:15,column:267}},{start:{line:15,column:40},end:{line:15,column:267}}],line:15},"1":{loc:{start:{line:15,column:44},end:{line:15,column:65}},type:"binary-expr",locations:[{start:{line:15,column:44},end:{line:15,column:47}},{start:{line:15,column:51},end:{line:15,column:65}}],line:15},"2":{loc:{start:{line:15,column:107},end:{line:15,column:228}},type:"if",locations:[{start:{line:15,column:107},end:{line:15,column:228}},{start:{line:15,column:107},end:{line:15,column:228}}],line:15},"3":{loc:{start:{line:15,column:149},end:{line:15,column:224}},type:"if",locations:[{start:{line:15,column:149},end:{line:15,column:224}},{start:{line:15,column:149},end:{line:15,column:224}}],line:15},"4":{loc:{start:{line:17,column:46},end:{line:17,column:92}},type:"cond-expr",locations:[{start:{line:17,column:70},end:{line:17,column:73}},{start:{line:17,column:76},end:{line:17,column:92}}],line:17},"5":{loc:{start:{line:17,column:46},end:{line:17,column:67}},type:"binary-expr",locations:[{start:{line:17,column:46},end:{line:17,column:49}},{start:{line:17,column:53},end:{line:17,column:67}}],line:17},"6":{loc:{start:{line:60,column:12},end:{line:65,column:13}},type:"if",locations:[{start:{line:60,column:12},end:{line:65,column:13}},{start:{line:60,column:12},end:{line:65,column:13}}],line:60},"7":{loc:{start:{line:68,column:12},end:{line:70,column:13}},type:"if",locations:[{start:{line:68,column:12},end:{line:70,column:13}},{start:{line:68,column:12},end:{line:70,column:13}}],line:68}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_mihs77e3.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _userModel=(cov_mihs77e3.s[1]++,require('../model/userModel'));var _userModel2=(cov_mihs77e3.s[2]++,_interopRequireDefault(_userModel));var _helper=(cov_mihs77e3.s[3]++,require('./helper'));var Helper=(cov_mihs77e3.s[4]++,_interopRequireWildcard(_helper));function _interopRequireWildcard(obj){cov_mihs77e3.f[0]++;cov_mihs77e3.s[5]++;if((cov_mihs77e3.b[1][0]++,obj)&&(cov_mihs77e3.b[1][1]++,obj.__esModule)){cov_mihs77e3.b[0][0]++;cov_mihs77e3.s[6]++;return obj;}else{cov_mihs77e3.b[0][1]++;var newObj=(cov_mihs77e3.s[7]++,{});cov_mihs77e3.s[8]++;if(obj!=null){cov_mihs77e3.b[2][0]++;cov_mihs77e3.s[9]++;for(var key in obj){cov_mihs77e3.s[10]++;if(Object.prototype.hasOwnProperty.call(obj,key)){cov_mihs77e3.b[3][0]++;cov_mihs77e3.s[11]++;newObj[key]=obj[key];}else{cov_mihs77e3.b[3][1]++;}}}else{cov_mihs77e3.b[2][1]++;}cov_mihs77e3.s[12]++;newObj.default=obj;cov_mihs77e3.s[13]++;return newObj;}}function _interopRequireDefault(obj){cov_mihs77e3.f[1]++;cov_mihs77e3.s[14]++;return(cov_mihs77e3.b[5][0]++,obj)&&(cov_mihs77e3.b[5][1]++,obj.__esModule)?(cov_mihs77e3.b[4][0]++,obj):(cov_mihs77e3.b[4][1]++,{default:obj});}/**
 * @class User
 */ // User controller
class User{/**
     * @async createUser
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async createUser(req,res){cov_mihs77e3.f[2]++;const password=(cov_mihs77e3.s[15]++,Helper.encryptedPassword(req.body.password));cov_mihs77e3.s[16]++;try{const newUser=(cov_mihs77e3.s[17]++,await _userModel2.default.create(req.body.firstname,req.body.lastname,req.body.username,req.body.othernames,req.body.email,password,req.body.phone));const userToken=(cov_mihs77e3.s[18]++,Helper.generateToken(newUser.id));cov_mihs77e3.s[19]++;return res.status(201).send({status:201,data:[{token:userToken,user:newUser}]});}catch(error){cov_mihs77e3.s[20]++;return res.status(500).send({message:error});}}/**
     * @async login
     * @param {*} req
     * @param {*} res
     * @returns {object}
     */static async login(req,res){cov_mihs77e3.f[3]++;cov_mihs77e3.s[21]++;try{const user=(cov_mihs77e3.s[22]++,await _userModel2.default.getOne(req.body.email));cov_mihs77e3.s[23]++;if(!user){cov_mihs77e3.b[6][0]++;cov_mihs77e3.s[24]++;return res.status(404).send({status:404,message:'user not found'});}else{cov_mihs77e3.b[6][1]++;}const match=(cov_mihs77e3.s[25]++,await Helper.compare(req.body.password,user.password));cov_mihs77e3.s[26]++;if(!match){cov_mihs77e3.b[7][0]++;cov_mihs77e3.s[27]++;return res.status(400).send({message:'incorrect crdentials'});}else{cov_mihs77e3.b[7][1]++;}const userToken=(cov_mihs77e3.s[28]++,Helper.generateToken(user.id));cov_mihs77e3.s[29]++;return res.status(200).send({status:200,data:[{token:userToken,// eslint-disable-next-line object-shorthand
user:user}]});}catch(error){cov_mihs77e3.s[30]++;return res.status(500).send({message:error});}}}cov_mihs77e3.s[31]++;exports.default=User;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkhlbHBlciIsIlVzZXIiLCJjcmVhdGVVc2VyIiwicmVxIiwicmVzIiwicGFzc3dvcmQiLCJlbmNyeXB0ZWRQYXNzd29yZCIsImJvZHkiLCJuZXdVc2VyIiwiTW9kZWwiLCJjcmVhdGUiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsInVzZXJuYW1lIiwib3RoZXJuYW1lcyIsImVtYWlsIiwicGhvbmUiLCJ1c2VyVG9rZW4iLCJnZW5lcmF0ZVRva2VuIiwiaWQiLCJzdGF0dXMiLCJzZW5kIiwiZGF0YSIsInRva2VuIiwidXNlciIsImVycm9yIiwibWVzc2FnZSIsImxvZ2luIiwiZ2V0T25lIiwibWF0Y2giLCJjb21wYXJlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFFQTs7OztBQUNBOztJQUFZQSxNOzs7Ozs7QUFHWjs7O0FBTkE7O0FBU0EsTUFBTUMsSUFBTixDQUFXO0FBQ1A7Ozs7OztBQU1BLGlCQUFhQyxVQUFiLENBQXdCQyxHQUF4QixFQUE2QkMsR0FBN0IsRUFBa0M7QUFDOUIsY0FBTUMsV0FBV0wsT0FBT00saUJBQVAsQ0FBeUJILElBQUlJLElBQUosQ0FBU0YsUUFBbEMsQ0FBakI7QUFDQSxZQUFJO0FBQ0Esa0JBQU1HLFVBQVUsTUFBTUMsb0JBQU1DLE1BQU4sQ0FDbEJQLElBQUlJLElBQUosQ0FBU0ksU0FEUyxFQUVsQlIsSUFBSUksSUFBSixDQUFTSyxRQUZTLEVBR2xCVCxJQUFJSSxJQUFKLENBQVNNLFFBSFMsRUFJbEJWLElBQUlJLElBQUosQ0FBU08sVUFKUyxFQUtsQlgsSUFBSUksSUFBSixDQUFTUSxLQUxTLEVBTWxCVixRQU5rQixFQU9sQkYsSUFBSUksSUFBSixDQUFTUyxLQVBTLENBQXRCO0FBU0Esa0JBQU1DLFlBQVlqQixPQUFPa0IsYUFBUCxDQUFxQlYsUUFBUVcsRUFBN0IsQ0FBbEI7QUFDQSxtQkFBT2YsSUFBSWdCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUN4QkQsd0JBQVEsR0FEZ0I7QUFFeEJFLHNCQUFNLENBQUM7QUFDSEMsMkJBQU9OLFNBREo7QUFFSE8sMEJBQU1oQjtBQUZILGlCQUFEO0FBRmtCLGFBQXJCLENBQVA7QUFPSCxTQWxCRCxDQWtCRSxPQUFPaUIsS0FBUCxFQUFjO0FBQ1osbUJBQU9yQixJQUFJZ0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ3hCSyx5QkFBU0Q7QUFEZSxhQUFyQixDQUFQO0FBR0g7QUFDSjs7QUFFRDs7Ozs7O0FBTUEsaUJBQWFFLEtBQWIsQ0FBbUJ4QixHQUFuQixFQUF3QkMsR0FBeEIsRUFBNkI7QUFDekIsWUFBSTtBQUNBLGtCQUFNb0IsT0FBTyxNQUFNZixvQkFBTW1CLE1BQU4sQ0FBYXpCLElBQUlJLElBQUosQ0FBU1EsS0FBdEIsQ0FBbkI7O0FBRUEsZ0JBQUksQ0FBQ1MsSUFBTCxFQUFXO0FBQ1AsdUJBQU9wQixJQUFJZ0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ3hCRCw0QkFBUSxHQURnQjtBQUV4Qk0sNkJBQVM7QUFGZSxpQkFBckIsQ0FBUDtBQUlIOztBQUVELGtCQUFNRyxRQUFRLE1BQU03QixPQUFPOEIsT0FBUCxDQUFlM0IsSUFBSUksSUFBSixDQUFTRixRQUF4QixFQUFrQ21CLEtBQUtuQixRQUF2QyxDQUFwQjtBQUNBLGdCQUFJLENBQUN3QixLQUFMLEVBQVk7QUFDUix1QkFBT3pCLElBQUlnQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsRUFBRUssU0FBUyxzQkFBWCxFQUFyQixDQUFQO0FBQ0g7QUFDRCxrQkFBTVQsWUFBWWpCLE9BQU9rQixhQUFQLENBQXFCTSxLQUFLTCxFQUExQixDQUFsQjtBQUNBLG1CQUFPZixJQUFJZ0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ3hCRCx3QkFBUSxHQURnQjtBQUV4QkUsc0JBQU0sQ0FBQztBQUNIQywyQkFBT04sU0FESjtBQUVIO0FBQ0FPLDBCQUFNQTtBQUhILGlCQUFEO0FBRmtCLGFBQXJCLENBQVA7QUFRSCxTQXZCRCxDQXVCRSxPQUFPQyxLQUFQLEVBQWM7QUFDWixtQkFBT3JCLElBQUlnQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDeEJLLHlCQUFTRDtBQURlLGFBQXJCLENBQVA7QUFHSDtBQUNKO0FBckVNOztrQkF3RUl4QixJIiwiZmlsZSI6InVzZXJDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IkM6L1VzZXJzL3VzZXIgcGMvRG9jdW1lbnRzL2lSZXBvcnQvc2VydmVyL2NvbnRyb2xsZXIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBVc2VyIGNvbnRyb2xsZXJcclxuXHJcbmltcG9ydCBNb2RlbCBmcm9tICcuLi9tb2RlbC91c2VyTW9kZWwnO1xyXG5pbXBvcnQgKiBhcyBIZWxwZXIgZnJvbSAnLi9oZWxwZXInO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAY2xhc3MgVXNlclxyXG4gKi9cclxuY2xhc3MgVXNlciB7XHJcbiAgICAvKipcclxuICAgICAqIEBhc3luYyBjcmVhdGVVc2VyXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlcVxyXG4gICAgICogQHBhcmFtIHsqfSByZXNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVVc2VyKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBIZWxwZXIuZW5jcnlwdGVkUGFzc3dvcmQocmVxLmJvZHkucGFzc3dvcmQpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBNb2RlbC5jcmVhdGUoXHJcbiAgICAgICAgICAgICAgICByZXEuYm9keS5maXJzdG5hbWUsXHJcbiAgICAgICAgICAgICAgICByZXEuYm9keS5sYXN0bmFtZSxcclxuICAgICAgICAgICAgICAgIHJlcS5ib2R5LnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgcmVxLmJvZHkub3RoZXJuYW1lcyxcclxuICAgICAgICAgICAgICAgIHJlcS5ib2R5LmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICByZXEuYm9keS5waG9uZSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgdXNlclRva2VuID0gSGVscGVyLmdlbmVyYXRlVG9rZW4obmV3VXNlci5pZCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHVzZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB1c2VyOiBuZXdVc2VyLFxyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGFzeW5jIGxvZ2luXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlcVxyXG4gICAgICogQHBhcmFtIHsqfSByZXNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBsb2dpbihyZXEsIHJlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBNb2RlbC5nZXRPbmUocmVxLmJvZHkuZW1haWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNDA0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICd1c2VyIG5vdCBmb3VuZCcsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBhd2FpdCBIZWxwZXIuY29tcGFyZShyZXEuYm9keS5wYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IG1lc3NhZ2U6ICdpbmNvcnJlY3QgY3JkZW50aWFscycgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdXNlclRva2VuID0gSGVscGVyLmdlbmVyYXRlVG9rZW4odXNlci5pZCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHVzZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JqZWN0LXNob3J0aGFuZFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsXHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXI7XHJcbiJdfQ==