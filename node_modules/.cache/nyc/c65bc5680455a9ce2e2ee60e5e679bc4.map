{"version":3,"sources":["redflagController.js"],"names":["Records","createRecord","req","res","newRecord","Model","create","userId","body","type","location","images","videos","comment","status","send","data","id","message","record","error","getAllRedflags","allRecords","getAll","getOneRedflag","oneRedflag","getOne","params","updateRedflagLocation","updatedLocation","updateLocation","updateRedflagComment","updatedComment","updateComment","deleteRedflag","delete"],"mappings":"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","file":"redflagController.js","sourceRoot":"C:/Users/user pc/Documents/iReport/server/controller","sourcesContent":["// Records controller\r\n\r\nimport Model from '../model/recordsModel';\r\n\r\nclass Records {\r\n    /**\r\n     * @async createRecord\r\n     * @param {*} req\r\n     * @param {*} res\r\n     * @returns {object}\r\n     */\r\n    static async createRecord(req, res) {\r\n        try {\r\n            const newRecord = await Model.create(\r\n                req.userId,\r\n                req.body.type,\r\n                req.body.location,\r\n                req.body.images,\r\n                req.body.videos,\r\n                req.body.comment,\r\n            );\r\n            return res.status(201).send({\r\n                status: 201,\r\n                data: [{\r\n                    id: newRecord.id,\r\n                    message: 'Created red-flag record',\r\n                    record: newRecord,\r\n                },\r\n                ],\r\n            });\r\n        } catch (error) {\r\n            return res.status(500).send({\r\n                message: error,\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @async getAllRedflags\r\n     * @param {*} req\r\n     * @param {*} res\r\n     * @returns {object}\r\n     */\r\n    static async getAllRedflags(req, res) {\r\n        try {\r\n            const allRecords = await Model.getAll(req.userId);\r\n            return res.status(200).send({\r\n                status: 200,\r\n                data: allRecords,\r\n            });\r\n        } catch (error) {\r\n            return res.status(500).send({\r\n                message: error,\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @async\r\n     * @param {*} req\r\n     * @param {*} res\r\n     * @returns {object}\r\n     */\r\n    static async getOneRedflag(req, res) {\r\n        try {\r\n            const oneRedflag = await Model.getOne(req.userId, req.params.id);\r\n\r\n            if (!oneRedflag) {\r\n                return res.status(404).send({\r\n                    status: 404,\r\n                    message: 'Red-flag not found',\r\n                });\r\n            }\r\n\r\n            return res.status(200).send({\r\n                status: 200,\r\n                data: oneRedflag,\r\n            });\r\n        } catch (error) {\r\n            return res.status(500).send({\r\n                message: error,\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @async updateRedflagLocation\r\n     * @param {*} req\r\n     * @param {*} res\r\n     * @returns {object}\r\n     */\r\n    static async updateRedflagLocation(req, res) {\r\n        try {\r\n            const updatedLocation = await Model.updateLocation(req.params.id, req.body.location);\r\n\r\n            if (!updatedLocation) {\r\n                return res.status(404).send({\r\n                    status: 404,\r\n                    message: 'Red-flag not found',\r\n                });\r\n            }\r\n\r\n            return res.status(200).send({\r\n                status: 200,\r\n                message: 'Updated red-flag record\\'s location',\r\n                data: updatedLocation,\r\n            });\r\n        } catch (error) {\r\n            return res.status(500).send({\r\n                message: error,\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @async updateRedflagComment\r\n     * @param {*} req\r\n     * @param {*} res\r\n     * @returns {object}\r\n     */\r\n    static async updateRedflagComment(req, res) {\r\n        try {\r\n            const updatedComment = await Model.updateComment(req.params.id, req.body.comment);\r\n\r\n            if (!updatedComment) {\r\n                return res.status(404).send({\r\n                    status: 404,\r\n                    message: 'Red-flag not found',\r\n                });\r\n            }\r\n\r\n            return res.status(200).send({\r\n                status: 200,\r\n                message: 'Updated red-flag record\\'s comment',\r\n                data: updatedComment,\r\n            });\r\n        } catch (error) {\r\n            return res.status(500).send({\r\n                message: error,\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @async deleteRedflag\r\n     * @param {*} req\r\n     * @param {*} res\r\n     * @returns {object}\r\n     */\r\n    static async deleteRedflag(req, res) {\r\n        try {\r\n            const deleteRedflag = await Model.delete(req.userId, req.params.id);\r\n\r\n            if (!deleteRedflag) {\r\n                return res.status(404).send({\r\n                    status: 404,\r\n                    message: 'Red-flag not found',\r\n                });\r\n            }\r\n\r\n            return res.status(200).send({\r\n                status: 200,\r\n                message: 'red-flag record has been deleted',\r\n                data: deleteRedflag,\r\n            });\r\n        } catch (error) {\r\n            return res.status(500).send({\r\n                message: error,\r\n            });\r\n        }\r\n    }\r\n}\r\nexport default Records;\r\n"]}